<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Have Internet? - ElvisGmz</title>
    <link rel="stylesheet" href="./style.css">
    <script src="./index.js"></script>
    
    <link rel="shortcut icon" href="./assets/icon.svg" type="image/x-icon">
    <!-- Primary Meta Tags -->
    <title>I have internet? - ElvisGmz</title>
    <meta name="title" content="I have internet? - ElvisGmz">
    <meta name="description" content="Get comfortable I'll let you know when your connection has returned">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://i-have-internet.vercel.app/">
    <meta property="og:title" content="I have internet? - ElvisGmz">
    <meta property="og:description" content="Get comfortable I'll let you know when your connection has returned">
    <meta property="og:image" content="./assets/dude.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://i-have-internet.vercel.app/">
    <meta property="twitter:title" content="I have internet? - ElvisGmz">
    <meta property="twitter:description" content="Get comfortable I'll let you know when your connection has returned">
    <meta property="twitter:image" content="./assets/dude.jpg">

</head>
<body>
    <main>
        <div id="container">
            <img class="icon" src="./assets/undraw_Loading.svg" />'
        </div>
        <h1 id="Title" style="text-align: center;">Wait</h1>
    </main>
    <script>
        const titleElement = document.querySelector('#Title');
        const container = document.querySelector('#container')
        
        async function testInternet() {
            try {
                const online = await fetch('https://res.cloudinary.com/superfolio/image/upload/v1625528030/impickerick_irmwvv.png', {
                    headers: {
                        'pragma': 'no-cache',
                        'cache-control': 'no-cache',
                    }
                });
                return online.status === 200;
            } catch(error) {
                return false;
            }
        }

        setInterval(async () => {
            if (await testInternet()){
                container.innerHTML = '<img class="icon" src="./assets/undraw_broadcast.svg" />';
                titleElement.innerHTML = 'You have internet! ğŸ‰';
            } else {
                container.innerHTML = '<img class="icon" src="./assets/undraw_signal_searching.svg" />';
                titleElement.innerHTML = "You don't have internet ğŸ’” Checking...";
            }
        }, 3000)
    </script>
</body>
</html>